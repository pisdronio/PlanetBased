<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planet Game</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 20px;
    }

    #console {
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      background-color: #000;
      color: #fff;
      padding: 10px;
      margin-bottom: 10px;
    }

    button {
      padding: 10px;
      margin: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="console"></div>
  <button onclick="cultivate('soy')">Cultivate Soy</button>
  <button onclick="cultivate('rice')">Cultivate Rice</button>
  <button onclick="raise('cattle')">Raise Cattle</button>
  <button onclick="raise('fish')">Raise Fish</button>
  <button onclick="raise('fruits')">Raise Fruits</button>
  <button onclick="raise('vegetables')">Raise Vegetables</button>
  <button onclick="quit()">Quit</button>

  <script>
    // Define the Planet class
    class Planet {
      constructor() {
        this.resources = {
          water: 100,
          soil: 100,
          sunlight: 100,
          soy: 10,
          rice: 10,
          cattle: 5,
          fish: 5,
          fruits: 8,
          vegetables: 8,
        };
        this.population = 10;
        this.animalPopulation = 5;
        this.povertyLevel = 0;
        this.globalWarming = 0;
        this.health = 100;
        this.daysSurvived = 0;
        this.isGameOver = false;
      }

      // Function to update the game state for each day
      update() {
        // Handle random events
        this.handleRandomEvent();

        // Adjust resources based on dynamic factors (simplified for demonstration)
        this.resources.water += Math.floor(Math.random() * 6) - 3; // +/- 3 units
        this.resources.soil += Math.floor(Math.random() * 6) - 3;
        this.resources.sunlight += Math.floor(Math.random() * 6) - 3;

        // Calculate the effect of animal raising on epidemic probability
        const epidemicChance = 0.1 + this.animalPopulation * 0.02;

        // Check if an epidemic occurs
        if (Math.random() < epidemicChance) {
          console.log("Epidemic! Contagious disease spreads.");
          this.handleEpidemic();
        }

        // ... (unchanged code)

        // Display current state
        this.display();
      }

      // Function to handle random events
      handleRandomEvent() {
        const eventChance = Math.random(); // Generate a random number between 0 and 1

        // Example: 10% chance of a drought
        if (eventChance < 0.1) {
          console.log("Drought! Water resources are affected.");
          this.resources.water -= 20;
        }

        // Example: 5% chance of a wildfire
        else if (eventChance < 0.15) {
          console.log("Wildfire! Sunlight resources are affected.");
          this.resources.sunlight -= 15;
        }

        // Example: 8% chance of a disease outbreak
        else if (eventChance < 0.23) {
          console.log("Disease outbreak! Population health is affected.");
          this.health -= 10;
        }

        // Additional Events with Lower Probabilities
        else if (eventChance < 0.25) {
          console.log("Alien Encounter! Technology boost or threat.");
          this.handleAlienEncounter();
        } else if (eventChance < 0.3) {
          console.log("Technology Breakthrough! Resource production improves.");
          this.handleTechnologyBreakthrough();
        } else if (eventChance < 0.35) {
          console.log("Natural Resource Discovery! Temporary resource boost.");
          this.handleResourceDiscovery();
        } else if (eventChance < 0.4) {
          console.log("Energy Crisis! Decline in productivity.");
          this.handleEnergyCrisis();
        } else if (eventChance < 0.45) {
          console.log("Civil Unrest! Population dissatisfaction leads to challenges.");
          this.handleCivilUnrest();
        } else if (eventChance < 0.5) {
          console.log("Migration Waves! Impact on resources and opportunities.");
          this.handleMigrationWaves();
        } else if (eventChance < 0.55) {
          console.log("Space Debris Impact! Damage to resources and infrastructure.");
          this.handleSpaceDebrisImpact();
        } else if (eventChance < 0.6) {
          console.log("Renewable Energy Revolution! Positive impact on resources and environment.");
          this.handleRenewableEnergyRevolution();
        } else if (eventChance < 0.65) {
          console.log("Rogue AI Threat! Technological setback and potential danger.");
          this.handleRogueAIThreat();
        } else if (eventChance < 0.7) {
          console.log("Resource Conservation Movement! Population embraces sustainability.");
          this.handleResourceConservationMovement();
        }

        // Add more random events as needed
      }

      // Placeholder functions for event effects
      handleEpidemic() {
        // Implement the effect of the epidemic
        console.log("Epidemic Placeholder Effect");
        // For example, decrease health and increase poverty
        this.health -= 20;
        this.povertyLevel += 10;
      }

      handleAlienEncounter() {
        // Implement the effect of the event
        console.log("Alien Encounter Placeholder Effect");
        // For example, boost technology or harm resources
        this.resources.water += 10;
        this.resources.soil += 5;
        this.resources.sunlight -= 5;
      }

      handleTechnologyBreakthrough() {
        // Implement the effect of the event
        console.log("Technology Breakthrough Placeholder Effect");
        // For example, increase resource production
        this.resources.water += 5;
        this.resources.soil += 5;
        this.resources.sunlight += 5;
      }

      handleResourceDiscovery() {
        // Implement the effect of the event
        console.log("Natural Resource Discovery Placeholder Effect");
        // For example, temporary boost in resources
        this.resources.water += 15;
        this.resources.soil += 10;
        this.resources.sunlight += 10;
      }

      handleEnergyCrisis() {
        // Implement the effect of the event
        console.log("Energy Crisis Placeholder Effect");
        // For example, decrease resource production
        this.resources.water -= 5;
        this.resources.soil -= 5;
        this.resources.sunlight -= 5;
      }

      handleCivilUnrest() {
        // Implement the effect of the event
        console.log("Civil Unrest Placeholder Effect");
        // For example, decrease health and increase poverty
        this.health -= 10;
        this.povertyLevel += 5;
      }

      handleMigrationWaves() {
        // Implement the effect of the event
        console.log("Migration Waves Placeholder Effect");
        // For example, change in population and resource distribution
        this.population += 20;
        this.resources.water -= 10;
        this.resources.soil -= 10;
        this.resources.sunlight -= 10;
      }

      handleSpaceDebrisImpact() {
        // Implement the effect of the event
        console.log("Space Debris Impact Placeholder Effect");
        // For example, decrease resources and increase poverty
        this.resources.water -= 10;
        this.resources.soil -= 10;
        this.resources.sunlight -= 10;
        this.povertyLevel += 5;
      }

      handleRenewableEnergyRevolution() {
        // Implement the effect of the event
        console.log("Renewable Energy Revolution Placeholder Effect");
        // For example, positive impact on resources and environment
        this.resources.water += 10;
        this.resources.soil += 10;
        this.resources.sunlight += 10;
        this.globalWarming -= 10;
      }

      handleRogueAIThreat() {
        // Implement the effect of the event
        console.log("Rogue AI Threat Placeholder Effect");
        // For example, technological setback
        this.resources.water -= 5;
        this.resources.soil -= 5;
        this.resources.sunlight -= 5;
      }

      handleResourceConservationMovement() {
        // Implement the effect of the event
        console.log("Resource Conservation Movement Placeholder Effect");
        // For example, positive impact on environment
        this.globalWarming -= 5;
      }

      // Function to display the current state of the planet
      display() {
        document.getElementById('console').innerHTML = `
          Day ${this.daysSurvived}<br>
          Population: ${this.population}<br>
          Animal Population: ${this.animalPopulation}<br>
          Water: ${this.resources.water}<br>
          Soil: ${this.resources.soil}<br>
          Sunlight: ${this.resources.sunlight}<br>
          Soy: ${this.resources.soy}<br>
          Rice: ${this.resources.rice}<br>
          Cattle: ${this.resources.cattle}<br>
          Fish: ${this.resources.fish}<br>
          Fruits: ${this.resources.fruits}<br>
          Vegetables: ${this.resources.vegetables}<br>
          Poverty Level: ${this.povertyLevel}<br>
          Global Warming: ${this.globalWarming}<br>
          Health: ${this.health}<br>`;
      }
    }

    // Example usage
    const gamePlanet = new Planet();

    // Function to start the game loop
    function startGameLoop() {
      setTimeout(function () {
        if (!gamePlanet.isGameOver) {
          // Update game state for the next day
          gamePlanet.update();
          gamePlanet.daysSurvived++; // Increment daysSurvived
          startGameLoop(); // Call the function recursively
        }
      }, 1000); // 1000 milliseconds = 1 second
    }

    // Start the game loop
    startGameLoop();

    // Functions to interact with the game
    function cultivate(type) {
      // Implement the cultivation logic
      console.log(`Cultivated ${type}.`);
    }

    function raise(type) {
      // Implement the animal raising logic
      console.log(`Raised ${type}.`);
    }

    function quit() {
      gamePlanet.isGameOver = true;
      console.log("Quitting the game.");
    }
  </script>
</body>
</html>
